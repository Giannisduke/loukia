{"version":3,"sources":["../assets/scripts/admin.js"],"names":["upload_image_button","e","preventDefault","$this","$","currentTarget","$input_field","prev","$image","parent","find","custom_uploader","wp","media","frames","file_frame","title","button","text","multiple","on","attachment","state","get","first","toJSON","val","url","html","open","remove_image_button","upload_gallery_button","data","Date","ids","gallerysc","gallery","edit","g","id_array","url_array","each","models","id","img","push","attributes","join","replace","urls","i","length","append","empty_gallery_button","empty_single_image","this","value","$this_image","attr","existing_values_arr","split","new_arr","remove","toString","replace_str","document","Array","prototype","what","ax","a","arguments","L","indexOf","splice"],"mappings":"AAAA,QAAAA,qBAAAC,GACAA,EAAAC,gBACA,IAAAC,GAAAC,EAAAH,EAAAI,eACAC,EAAAH,EAAAI,OACAC,EAAAL,EAAAM,SAAAC,KAAA,mBACAC,EAAAC,GAAAC,MAAAC,OAAAC,WAAAH,GAAAC,OACAG,MAAA,YACAC,QACAC,KAAA,aAEAC,UAAA,GAEAR,GAAAS,GAAA,SAAA,WACA,GAAAC,GAAAV,EAAAW,QAAAC,IAAA,aAAAC,QAAAC,QACAnB,GAAAoB,IAAAL,EAAAM,KACAnB,EAAAoB,KAAA,aAAAP,EAAAM,IAAA,UAEAhB,EAAAkB,OAGA,QAAAC,qBAAA7B,GACAA,EAAAC,gBACA,IAAAC,GAAAC,EAAAH,EAAAI,eACAC,EAAAH,EAAAM,SAAAC,KAAA,0BACAF,EAAAL,EAAAM,SAAAC,KAAA,kBAEAJ,GAAAoB,IAAA,IACAlB,EAAAoB,KAAA,IAMA,QAAAG,uBAAA9B,GACA,GAAAE,GAAAC,EAAAH,EAAAI,cAEA,IADAJ,EAAAC,kBACAC,EAAA6B,KAAA,cAAA,GAAAC,MAAA9B,EAAA6B,KAAA,YAAA,IAAA,CACA,GAAA1B,GAAAF,EAAA,0BACA8B,EAAA5B,EAAAoB,MACAS,EAAA,iBAAAD,EAAA,IACAtB,IAAAC,MAAAuB,QAAAC,KAAAF,GAAAf,GAAA,SAAA,SAAAkB,GACA,GAAAC,MACAC,IACApC,GAAAqC,KAAAH,EAAAI,OAAA,SAAAC,EAAAC,GACAJ,EAAAK,KAAAD,EAAAE,WAAAnB,KACAY,EAAAM,KAAAD,EAAAD,KAEA,IAAAT,GAAAK,EAAAQ,KAAA,IACAb,GAAAA,EAAAc,QAAA,QAAA,GACA,IAAAC,GAAAT,EAAAO,KAAA,IACAE,GAAAA,EAAAD,QAAA,QAAA,IACA1C,EAAAoB,IAAAQ,EAEA,KAAA,GADAN,GAAA,GACAsB,EAAA,EAAAA,EAAAV,EAAAW,OAAAD,IACAtB,GAAA,sCAAAW,EAAAW,GAAA,0CAAAV,EAAAU,GAAA,UAGA9C,GAAA,mBAAAwB,KAAA,IAAAwB,OAAAxB,KAGAzB,EAAA6B,KAAA,YAAA,GAAAC,OAGA,QAAAoB,sBAAApD,GACAA,EAAAC,iBACAE,EAAA,0BACAsB,IAAA,IACAtB,EAAA,mBAAAwB,KAAA,IAeA,QAAA0B,oBAAArD,GACAA,EAAAC,gBACA,IAAAC,GAAAC,EAAAmD,MACAC,EAAArD,EAAAM,SAAAuB,KAAA,MACAyB,EAAAtD,EAAAM,SAAAC,KAAA,OAEAJ,GADAmD,EAAAC,KAAA,OACAtD,EAAA,2BACAuD,EAAArD,EAAAoB,MAAAkC,MAAA,KACAC,EAAAF,EAAAG,OAAAN,EAAAO,YACAC,EAAAH,EAAAd,MACAzC,GAAAoB,IAAA,IAAAA,IAAAsC,GACA7D,EAAAM,SAAAqD,SAhEA1D,EAAA6D,UAAA7C,GAAA,QAAA,uBAAApB,qBACAoB,GAAA,QAAA,uBAAAU,qBAyCAoC,MAAAC,UAAAL,OAAA,WAEA,IADA,GAAAM,GAAAC,EAAAC,EAAAC,UAAAC,EAAAF,EAAAnB,OACAqB,GAAAjB,KAAAJ,QAEA,IADAiB,EAAAE,IAAAE,IACA,KAAAH,EAAAd,KAAAkB,QAAAL,KACAb,KAAAmB,OAAAL,EAAA,EAGA,OAAAd,OAgBAnD,EAAA6D,UAAA7C,GAAA,QAAA,kBAAAW,uBACAX,GAAA,QAAA,iBAAAiC,sBACAjC,GAAA,QAAA,wBAAAkC","file":"admin.js","sourcesContent":["function upload_image_button(e) {\n\te.preventDefault();\n\tvar $this = $( e.currentTarget );\n\tvar $input_field = $this.prev();\n\tvar $image = $this.parent().find( '.uploaded_image' );\n\tvar custom_uploader = wp.media.frames.file_frame = wp.media({\n\t\ttitle: 'Add Image',\n\t\tbutton: {\n\t\t\ttext: 'Add Image'\n\t\t},\n\t\tmultiple: false\n\t});\n\tcustom_uploader.on('select', function() {\n\t\tvar attachment = custom_uploader.state().get( 'selection' ).first().toJSON();\n\t\t$input_field.val( attachment.url );\n\t\t$image.html( '<img src=\"' + attachment.url + '\" />' );\n\t});\n\tcustom_uploader.open();\n}\n\nfunction remove_image_button(e) {\n\te.preventDefault();\n\tvar $this = $( e.currentTarget );\n\tvar $input_field = $this.parent().find( '.featured_image_upload' );\n\tvar $image = $this.parent().find( '.uploaded_image' );\n\n\t$input_field.val( '' );\n\t$image.html( '' );\n}\n$(document).on( 'click', '.upload_image_button', upload_image_button )\n\t\t   .on( 'click', '.remove_image_button', remove_image_button );\n\n\n\t\t\t function upload_gallery_button(e) {\n\t\t\t \tvar $this = $( e.currentTarget );\n\t\t\t \te.preventDefault();\n\t\t\t \tif ( ! $this.data( 'lockedAt' ) || + new Date() - $this.data( 'lockedAt' ) > 300) { // Doubleclick prevent.\n\t\t\t \t\tvar $input_field = $( '#mytheme_gallery_input' );\n\t\t\t \t\tvar ids = $input_field.val();\n\t\t\t \t\tvar gallerysc = '[gallery ids=\"' + ids + '\"]';\n\t\t\t \t\twp.media.gallery.edit( gallerysc ).on('update', function(g) {\n\t\t\t \t\t\tvar id_array = [];\n\t\t\t \t\t\tvar url_array = [];\n\t\t\t \t\t\t$.each(g.models, function(id, img){\n\t\t\t \t\t\t\turl_array.push( img.attributes.url );\n\t\t\t \t\t\t\tid_array.push( img.id );\n\t\t\t \t\t\t});\n\t\t\t \t\t\tvar ids = id_array.join( \",\" );\n\t\t\t \t\t\tids = ids.replace( /,\\s*$/, \"\" );\n\t\t\t \t\t\tvar urls = url_array.join( \",\" );\n\t\t\t \t\t\turls = urls.replace( /,\\s*$/, \"\" );\n\t\t\t \t\t\t$input_field.val( ids );\n\t\t\t \t\t\tvar html = '';\n\t\t\t \t\t\tfor (var i = 0 ; i < url_array.length; i++) {\n\t\t\t \t\t\t\thtml += '<div class=\"gallery-item\" data-id=\"' + id_array[i] + '\"><div class=\"remove\">x</div><img src=\"' + url_array[i] + '\"></div>';\n\t\t\t \t\t\t}\n\n\t\t\t \t\t\t$( '.gallery_images' ).html( '' ).append( html );\n\t\t\t \t\t});\n\t\t\t \t}\n\t\t\t \t$this.data( 'lockedAt', + new Date() );\n\t\t\t }\n\n\t\t\t function empty_gallery_button(e){\n\t\t\t \te.preventDefault();\n\t\t\t \tvar $input_field = $( '#mytheme_gallery_input' );\n\t\t\t \t$input_field.val( '' );\n\t\t\t \t$( '.gallery_images' ).html( '' );\n\t\t\t }\n\n\n\t\t\t Array.prototype.remove = function() {\n\t\t\t \tvar what, a = arguments, L = a.length, ax;\n\t\t\t \twhile (L && this.length) {\n\t\t\t \t\twhat = a[--L];\n\t\t\t \t\twhile ((ax = this.indexOf( what )) !== -1) {\n\t\t\t \t\t\tthis.splice( ax, 1 );\n\t\t\t \t\t}\n\t\t\t \t}\n\t\t\t \treturn this;\n\t\t\t };\n\n\t\t\t function empty_single_image(e){\n\t\t\t \te.preventDefault();\n\t\t\t \tvar $this = $( this );\n\t\t\t \tvar value = $this.parent().data( 'id' );\n\t\t\t \tvar $this_image = $this.parent().find( 'img' );\n\t\t\t \tvar $this_image_url = $this_image.attr( 'src' );\n\t\t\t \tvar $input_field = $( '#mytheme_gallery_input' );\n\t\t\t \tvar existing_values_arr = $input_field.val().split( ',' );\n\t\t\t \tvar new_arr = existing_values_arr.remove( value.toString() );\n\t\t\t \tvar replace_str = new_arr.join();\n\t\t\t \t$input_field.val( '' ).val( replace_str );\n\t\t\t \t$this.parent().remove();\n\t\t\t }\n\t\t\t $( document ).on( 'click', '#manage_gallery', upload_gallery_button )\n\t\t\t \t\t\t .on( 'click', '#empty_gallery', empty_gallery_button )\n\t\t\t \t\t\t .on( 'click', '.gallery-item .remove', empty_single_image );\n"],"sourceRoot":"assets/scripts/"}